// @bun
var d=Object.defineProperty;var Q=(l,i)=>{for(var b in i)d(l,b,{get:i[b],enumerable:!0,configurable:!0,set:(f)=>i[b]=()=>f})};var n=(l,i)=>()=>(l&&(i=l(l=0)),i);function O(l){if(!x.includes(l))throw Error(`Unsupported package manager: ${l}. Supported managers: ${x.join(", ")}`);return l}function q(l){return O(l||"npm")}function z(l){return r[l]}function D(){return x.join(", ")}var r,x;var X=n(()=>{r={npm:{name:"npm",displayName:"npm",listCommand:"npm list -g",listJsonCommand:"npm ls -g --json",installCommand:(l,i)=>`npm install -g ${i?`${l}@${i}`:`${l}@latest`}`,viewCommand:(l,i)=>`npm view ${l}${i?`@${i}`:""} version`},pnpm:{name:"pnpm",displayName:"pnpm",listCommand:"pnpm list -g",listJsonCommand:"pnpm list -g --json",installCommand:(l,i)=>`pnpm add -g ${i?`${l}@${i}`:`${l}@latest`}`,viewCommand:(l,i)=>`pnpm view ${l}${i?`@${i}`:""} version`},yarn:{name:"yarn",displayName:"Yarn",listCommand:"yarn global list",listJsonCommand:"yarn global list --json",installCommand:(l,i)=>`yarn global add ${i?`${l}@${i}`:`${l}@latest`}`,viewCommand:(l,i)=>`yarn info ${l}${i?`@${i}`:""} version`},bun:{name:"bun",displayName:"Bun",listCommand:"bun list -g",listJsonCommand:"bun list -g --json",installCommand:(l,i)=>`bun add -g ${i?`${l}@${i}`:`${l}@latest`}`,viewCommand:(l,i)=>`bun info ${l}${i?`@${i}`:""} version`}},x=["npm","pnpm","yarn","bun"]});var R={};Q(R,{runls:()=>k});import{exec as g}from"child_process";async function k(l){let i=q(l),b=z(i);console.log(`Listing global packages using ${b.displayName}...`),g(b.listCommand,(f,o,t)=>{if(f){console.log(`error: ${f.message}`);return}if(t){console.log(`stderr: ${t}`);return}console.log(o)})}var G=n(()=>{X()});var I={};Q(I,{runupdateall:()=>_,default:()=>p});import{exec as H}from"child_process";async function _(l){let i=q(l),b=z(i);console.log(`Checking for globally installed packages using ${b.displayName}...`),console.log(`This may take a moment...
`),H(b.listJsonCommand,(f,o)=>{if(f){console.log(`Error getting package list: ${f.message}`);return}try{let t=JSON.parse(o),y=[];if(t.dependencies){for(let[$,J]of Object.entries(t.dependencies))if(typeof J==="object"&&J!==null&&"version"in J&&typeof J.version==="string")y.push({name:$,version:J.version})}if(console.log(`Found ${y.length} globally installed packages`),console.log(`Checking for available updates...
`),y.length===0){console.log("No global packages found.");return}let u=0,j=[];y.forEach(($)=>{let J=b.viewCommand($.name);H(J,(w,m)=>{if(u++,w)console.log(`Could not check ${$.name}: ${w.message}`);else try{let L=JSON.parse(m),h=L.version||L.latest;if(h&&h!==$.version)console.log(`${$.name}: ${$.version} -> ${h}`),j.push({name:$.name,latest:h});else["nightly","dev","preview"].forEach((Y)=>{let Z=b.viewCommand($.name,Y);H(Z,(c,V)=>{if(!c&&V.trim())try{let C=JSON.parse(V),W=C.version||C.latest;if(W&&W!==$.version)console.log(`${$.name}: ${$.version} -> ${W} (${Y})`),j.push({name:$.name,latest:W})}catch{}})})}catch{console.log(`Could not parse version info for ${$.name}`)}if(u===y.length){let h=function(){if(L>=j.length){console.log(`
\uD83C\uDF89 All updates completed!`);return}let F=j[L];if(F){console.log(`Updating ${F.name} to ${F.latest} using ${b.displayName}...`);let Y=b.installCommand(F.name,F.latest);H(Y,(Z)=>{if(Z)console.log(`\u274C Failed to update ${F.name}: ${Z.message}`);else console.log(`\u2705 ${F.name} updated successfully using ${b.displayName}!`);L++,h()})}else L++,h()};if(j.length===0){console.log(`
All packages are already up to date! \u2705`);return}console.log(`
Found ${j.length} packages with updates available.`),console.log(`Starting updates...
`);let L=0;h()}})})}catch(t){console.log(`Error parsing ${b.displayName} output: ${t}`)}})}var p;var S=n(()=>{X();p=_});var P={};Q(P,{runupdate:()=>A,default:()=>a});import{exec as e}from"child_process";async function A(l,i){let b=l||process.argv[3];if(!b){console.log("Error: Please provide a package name."),console.log("Usage: npm-updater [--pm <package-manager>] update <package-name>");return}let f=q(i),o=z(f);console.log(`Updating ${b} using ${o.displayName}...`);let t=o.installCommand(b);e(t,(y,u,j)=>{if(y){console.log(`error: ${y.message}`);return}if(j){console.log(`stderr: ${j}`);return}console.log(u),console.log(`${b} has been updated successfully using ${o.displayName}!`)})}var a;var s=n(()=>{X();a=A});var U={};Q(U,{showlatestversion:()=>il});import{exec as ll}from"child_process";async function il(l,i){let b=l||process.argv[3];if(!b){console.log("Error: Please provide a package name."),console.log("Usage: npm-updater [--pm <package-manager>] latestversion <package-name>");return}let f=q(i),o=z(f);console.log(`Fetching latest version of ${b} using ${o.displayName}...`);let t=o.viewCommand(b);ll(t,(y,u,j)=>{if(y){console.log(`error: ${y.message}`);return}if(j){console.log(`stderr: ${j}`);return}console.log(`Latest version of ${b}: ${u.trim()}`)})}var T=n(()=>{X()});var B;var K=n(()=>{B={name:"@involvex/npm-global-updater",version:"0.0.6",description:"global npm package updater",license:"MIT",author:"involvex",main:"src/index.js",type:"module",repository:{type:"git",url:"https://github.com/involvex/npm-global-updater"},bin:{"npm-updater":"bin/npm-updater.js"},scripts:{lint:"eslint src ","lint:fix":"eslint src --fix",format:"prettier --write .","format:check":"prettier --check .",dev:"bun run src/index.ts",start:"bun bin/npm-updater.js",build:"bun build src/index.ts  --target bun --minify --outfile bin/npm-updater.js",prebuild:"bun run format && bun run lint:fix && bun run typecheck",typecheck:"tsc --noEmit","build:portable":"bun build --compile src/index.ts --outfile bin/npm-updater.exe"},devDependencies:{"@eslint/js":"^9.39.2","@eslint/json":"^0.14.0","@types/bun":"latest",eslint:"^9.39.2",globals:"^16.5.0",prettier:"^3.7.4","typescript-eslint":"^8.50.0"},peerDependencies:{typescript:"^5"},dependencies:{jiti:"^2.6.1"}}});var E={};Q(E,{showversion:()=>yl});function yl(){console.log("Version: "+B.version)}var M=n(()=>{K()});var v={};Q(v,{showabout:()=>fl});async function fl(){console.log("=================================================="),console.log("=== About this app ==="),console.log("Name: "+B.name),console.log("=================================================="),console.log("Repository: "+B.repository.url),console.log("=================================================="),console.log("Description: "+B.description),console.log("=================================================="),console.log("Version: "+B.version),console.log("=================================================="),console.log("Author: "+B.author),console.log("==================================================")}var N=n(()=>{K()});X();async function ol(){let l=process.argv.slice(2),i,b=0,f=l.indexOf("--pm");if(f!==-1){if(i=l[f+1],!i){console.log("Error: --pm flag requires a value"),console.log(`Supported package managers: ${D()}`);return}try{O(i)}catch(y){console.log(`Error: ${y instanceof Error?y.message:"Invalid package manager"}`),console.log(`Supported package managers: ${D()}`);return}l.splice(f,2),b=0}let o=l[b];if(console.log("=".repeat(50)),!o||o==="--help"||o==="-h"){t();return}switch(o){case"ls":case"list":{let{runls:y}=await Promise.resolve().then(() => (G(),R));await y(i)}break;case"updateall":{let{runupdateall:y}=await Promise.resolve().then(() => (S(),I));await y(i)}break;case"update":case"upgrade":case"--u":case"--update":{let{runupdate:y}=await Promise.resolve().then(() => (s(),P)),u=l[b+1];await y(u,i)}break;case"help":{t();break}case"latestversion":{let{showlatestversion:y}=await Promise.resolve().then(() => (T(),U)),u=l[b+1];await y(u,i)}break;case"version":case"--version":case"-v":{let{showversion:y}=await Promise.resolve().then(() => (M(),E));y()}break;case"about":{let{showabout:y}=await Promise.resolve().then(() => (N(),v));y()}}function t(){console.log(`
Usage: npm-updater [--pm <package-manager>] <command>

Package Managers:
  --pm npm                Use npm (default)
  --pm pnpm               Use pnpm
  --pm yarn               Use Yarn
  --pm bun                Use Bun

Commands:
  version(-v, --version)        Show npm-updater version
  ls                            List all global packages
  updateall                     Update all global packages
  update                        Update single global package
  help                          Show this help message
  latestversion                 Show latest version of a npm package
  about                         Show information about npm-updater

Options:
  --help, -h                    Show this help message
  --pm <package-manager>        Specify package manager (npm, pnpm, yarn, bun)
  --update, -u                  Update a package
  --version, -v                 Show npm-updater version

Examples:
  npm-updater ls                    # List packages using npm
  npm-updater --pm pnpm ls          # List packages using pnpm
  npm-updater --pm yarn updateall   # Update all packages using Yarn
  npm-updater update prettier       # Update prettier using npm (default)

For more information, visit: https://github.com/involvex/npm-global-updater
    `)}}ol();export{ol as run};
