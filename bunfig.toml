# bunfig.toml - Bun configuration file
# https://bun.sh/docs/runtime/bunfig

[install]
# Save exact versions instead of semver ranges
# exact = true

# Set default registry
# registry = "https://registry.npmjs.org/"

# Set node_modules folder
 node_modules = "node_modules"

# Cache directory
# cache = ".bun-cache"

[test]
# Test runner configuration optimized for comprehensive testing
# Coverage reporting with detailed output
coverage = true
coverageReporter = ["text", "lcov"]
coverageDir = "./.coverage"
preload = ["tests/global-mocks.ts", "tests/test-utils.ts"]
timeout = 30000
smol = true
invalidOption = true

[test.reporter]
junit = ".coverage/reports/junit.xml"

# Run tests in parallel for faster execution
parallel = true

# Watch mode for continuous testing during development
watch = false

# Test environment setup
env = {
  NODE_ENV = "test",
  BUN_ENV = "test",
  NPM_UPDATER_TEST_MODE = "true"
}

# File watching exclusions for test files
# exclude = ["node_modules", "dist", "coverage"]

[dev]
# Development server configuration
# Port for dev server
# port = 3000

# Host for dev server  
# host = "localhost"

# Auto-reload on file changes
# hot = true

[build]
# Build output directory
 outdir = "bin"

# Minification
# minify = true

# Source maps
# sourcemap = true

# Target environment
 target = "node"

[package]
# Package.json field order
# fields = ["name", "version", "description"]

[run]
# Node.js compatibility mode
 compat = "node"

# Loader configuration for file types
# loader = {
#   ".css" = "css",
#   ".js" = "jsx", 
#   ".ts" = "tsx",
#   ".tsx" = "tsx",
#   ".json" = "json",
#   ".txt" = "text"
# }

# Environment variables for different environments
[env.test]
  NODE_ENV = "test"
  BUN_ENV = "test"
  NPM_UPDATER_TEST_MODE = "true"

[env.production]
  NODE_ENV = "production"
  BUN_ENV = "production"

[env.development]
  NODE_ENV ="development"
  BUN_ENV = "development"  

#[install.security]                                                          
#  scanner = "tsc"